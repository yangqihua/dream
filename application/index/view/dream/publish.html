{include file="public/tpl/top" title="创建心愿" /}

<div style="padding-top: 45px;">

    <div class="dream-input-container" style="margin-top: 55px">
        <div class="weui-cells__title">标题</div>
        <div class="weui-cells">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <input class="weui-input" type="text" id="dreamTitle" placeholder="请输入心愿标题">
                </div>
            </div>
        </div>

        <div class="weui-cells__title">心愿描述</div>
        <div class="weui-cells weui-cells_form">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <textarea class="weui-textarea" id="dreamContent" placeholder="请输入心愿描述" rows="4"></textarea>
                    <!--<div class="weui-textarea-counter"><span>0</span>/200</div>-->
                </div>
            </div>
        </div>
    </div>

    <div class="weui-cells__title">提醒周期</div>
    <div class="weui-cells">
        <div class="weui-cell weui-cell_select">
            <div class="weui-cell__bd">
                <select class="weui-select" name="period" id="dreamPeriod">
                    <option selected="" value="1">每天</option>
                    <option value="7">一周</option>
                    <option value="30">一个月</option>
                </select>
            </div>
        </div>
    </div>

    <div class="weui-cell weui-cell_switch">
        <div class="weui-cell__bd">是否公开心愿</div>
        <div class="weui-cell__ft">
            <label for="dreamIsPublic" class="weui-switch-cp">
                <input id="dreamIsPublic" class="weui-switch-cp__input" type="checkbox" checked="checked">
                <div class="weui-switch-cp__box"></div>
            </label>
        </div>
    </div>


    <div class="weui-btn-area">
        <a class="weui-btn weui-btn_primary" href="javascript:" id="submit">确定</a>
    </div>

</div>

<script>
    $("#submit").click(function () {
        var dreamTitle = $('#dreamTitle').val();
        var dreamContent = $('#dreamContent').val();
        var dreamPeriod = $('#dreamPeriod').val();
        var dreamIsPublic = $('#dreamIsPublic').val() == 'on' ? 1 : 0;


        $ajax(
            "{:url('dream/addSheet')}",
            {'title': dreamTitle, 'content': dreamContent, 'period': dreamPeriod, 'is_public': dreamIsPublic},
            true,
            function (res) {  //成功
                console.log("success");
                location.href = "{:url('dream/index')}";
            }
        );
    });
</script>